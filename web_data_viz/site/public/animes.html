<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="CSS/style.css">
    <link rel="stylesheet" href="CSS/animes_mangas.css">    
    <link rel="shortcut icon" href="IMG/logos/logo_branca.png">
    <title>Animes | OtakuHub</title>
</head>
<body onload="todos_animes()">
    <header class="header">
        <ul class="navegacao">
            <li><a href="index.html">Home</a></li>
            <li><a href="sobre.html">Saiba Mais</a></li>
            <li><a href="animes.html">Animes</a></li>
            <li><a href="mangas.html">Mangás</a></li>
            <li><a href="cadastro.html">Cadastro</a></li>
            <li><a href="login.html">Login</a></li>
        </ul>

        <div class="perfil">
            <a href="perfil.html">
                <img src="IMG/avatar.png" alt="">
            </a>
        </div>

    </header>
    <div class="margin_top">
    </div>
    <div class="conteudo_pagina">


        <h2>Lista de Animes e Mangás</h2>

        <div id="animes_mangas" class="animes_mangas">
            

        </div>


    </div>
    <footer class="footer">
        <p>
            ©OtakuHub 2023 - Todos os direitos reservados
        </p>
    </footer>
</body>
</html>
<script>
    function todos_animes() {
        var sla = "ok";
        fetch("/animes/todos_animes").then(function (resposta) {
            console.log(resposta);
            if (resposta.ok) {
                if (resposta.status == 204) {
                    animes_mangas.style.justifyContent = "center";
                    animes_mangas.innerHTML = `
                        <div class="barra_superior">
                            <h3>Nenhum resultado encontrado</h3>
                        </div>
                    `;
                }

                resposta.json().then(function (resposta) {
                    console.log("Dados recebidos: ", JSON.stringify(resposta));

                    animes_mangas.innerHTML = "";
                    for (var i = resposta.length - 1; i >= 0; i--) {
                        var nome = resposta[i].nome;
                        var foto = resposta[i].foto_capa;
                        
                        animes_mangas.innerHTML += `
                            <div class="card_anime">
                                <h4>${nome}</h4>
                                <img src="assets/${foto}" alt="">
                            </div>
                        `;
                    }
                })
            }
            console.log(sla);
        }).catch(function(erro) {
            console.log(`#ERRO: ${erro}`);
        })

        
    }
</script>